{"version":3,"sources":["assets/images/icons/internet.png","views/dashboard/widgets/WidgetUsersActivity.js"],"names":["WidgetUsersActivity","hideCardTitle","id_user","hide_me","t","useTranslation","store","useSelector","state","storeName","dispatch","useDispatch","useEffect","fetchData","data","length","isLoading","getAlwaysGrid","getDataList","filter_id_user","filter_hide_me","fetchDataInterval","setInterval","clearInterval","RenderDetail","rows","row","id_activityCategory","browserObj","Chrome","class","icon","img","chromeLogo","ChromeMobile","Edge","edgeLogo","Firefox","mozillaLogo","Opera","operaLogo","Safari","safariLogo","Others","otherLogo","imgOrIcon","attributes","user_agent","family","replace","Img","Info","className","src","alt","height","os","major","ip","device","model","RenderIcon","user","avatar","color","initials","content","name","timeLineData","useMemo","Array","map","title","width","meta","metaClassName","customContent","description","code","locale","fromNow","created_date","style","minHeight","tag","blocking","loader","textAlign","error","message","titleCustom","messageCustom"],"mappings":"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","file":"static/js/140.27509cab.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAcCAMAAABBJv+bAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAHAAAAACwgWRlAAABI1BMVEUAAACDi4uCh42Gio6DiYyChoyChoyDh4yDh4uCh4yDh4uDh4uChoyDh4yChouDh4yFiY6Gio+Hi5CKjpKMkJWRlJmTl5uUl5uXmp6Xmp+Ym5+ZnKCanaGcoKSdoKSeoaWhpKijpqmkp6qlqKymqayoq66rrrGytLeytLiztbi0trm3ur24u725vL66vL+6vb++wMK/wcTAwsXBw8bExsjFx8nGx8rGyMrHycvIyczKzM7Lzc/S09XT1NbU1tfX2NrX2drZ2tvZ2tza29zb3N3c3d7c3d/d3t/d3uDg4eLj4+Xk5OXm5+jn6Ono6erp6uvs7e7t7e7t7u/u7u/x8fLy8/Pz9PT19fX39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7////BHwLlAAAADnRSTlMAITE/VIG+x9jZ7PLz+smRHRAAAAEUSURBVCjPhZNnU8JAEIYTINXwil3ErlGxIQYL9pJILFHBXk7z/3+Fp6cZBG72+XQzz8zO3u67ipKQ0nTLcSxdSyntZEwkmJkWqRr4h6E227SNFux0k82ijWziVRsdsP/qG+iI8dszJIj+TZk2f6YBKd/z0eRa41oHqmX4E5Nnbpgr8Zdbmy3UcqVtQOfaAraifFz2rgrxSFQfioevN1bi8csKYHHtAO774t3J0Sae5x9eio/YOT1oLL1OA47QfZ++d38zg2M/vAj2MXdb9wLWA3SJ4ojY4NNbL1bZepUV0f/RGGXnEMV5a1g+RGUXyIdjU+EAsLfWHSxAtEZ8jBgLMVRqJcRCqTgQYaKiSAWZOgPZEX0Bchw0koyW2TQAAAAASUVORK5CYII=\"","/* eslint-disable implicit-arrow-linebreak */\r\n/* eslint-disable no-confusing-arrow */\r\n/* eslint-disable multiline-ternary */\r\nimport { useEffect, useMemo } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { Card, CardHeader, CardTitle, CardBody } from \"reactstrap\"\r\nimport { Chrome, Info, Users } from \"react-feather\"\r\nimport Avatar from \"@components/avatar\"\r\nimport Timeline from \"@components/timeline\"\r\nimport {\r\n  storeName,\r\n  getAlwaysGrid,\r\n  getDataList\r\n} from \"../../apps/user/store/userActivity\"\r\nimport { Skeleton } from \"@mui/material\"\r\nimport chromeLogo from \"@src/assets/images/icons/google-chrome.png\"\r\nimport edgeLogo from \"@src/assets/images/icons/internet-explorer.png\"\r\nimport mozillaLogo from \"@src/assets/images/icons/mozila-firefox.png\"\r\nimport safariLogo from \"@src/assets/images/icons/apple-safari.png\"\r\nimport operaLogo from \"@src/assets/images/icons/opera.png\"\r\nimport otherLogo from \"@src/assets/images/icons/internet.png\"\r\n\r\nimport Moment from \"react-moment\"\r\nimport \"moment-timezone\"\r\nimport \"moment/locale/id\"\r\nimport UILoader from \"@components/ui-loader\"\r\nimport {\r\n  NoDataDisplay,\r\n  Loader,\r\n  ErrorFetchData\r\n} from \"@src/shared/CommonComponents\"\r\n\r\nconst WidgetUsersActivity = ({\r\n  hideCardTitle = false,\r\n  id_user = null,\r\n  hide_me = null\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const store = useSelector((state) => state[storeName])\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    const fetchData = () => {\r\n      if ((store.data.length === 0 && !store.isLoading) || getAlwaysGrid) {\r\n        dispatch(\r\n          getDataList({\r\n            length: 6,\r\n            filter_id_user: id_user,\r\n            filter_hide_me: hide_me\r\n          })\r\n        )\r\n      }\r\n    }\r\n    const mnt = 5 * 60 * 1000\r\n    const fetchDataInterval = setInterval(fetchData, mnt)\r\n\r\n    fetchData()\r\n    return () => {\r\n      clearInterval(fetchDataInterval)\r\n    }\r\n  }, [])\r\n\r\n  const RenderDetail = (rows) => {\r\n    const row = rows.row\r\n    if (row.id_activityCategory === 1) {\r\n      const browserObj = {\r\n        Chrome: {\r\n          class: \"text-primary\",\r\n          icon: Chrome,\r\n          img: chromeLogo\r\n        },\r\n        ChromeMobile: {\r\n          class: \"text-primary\",\r\n          icon: Chrome,\r\n          img: chromeLogo\r\n        },\r\n        Edge: {\r\n          class: \"text-primary\",\r\n          icon: Chrome,\r\n          img: edgeLogo\r\n        },\r\n        Firefox: {\r\n          class: \"text-primary\",\r\n          icon: Chrome,\r\n          img: mozillaLogo\r\n        },\r\n        Opera: {\r\n          class: \"text-primary\",\r\n          icon: Chrome,\r\n          img: operaLogo\r\n        },\r\n        Safari: {\r\n          class: \"text-primary\",\r\n          icon: Chrome,\r\n          img: safariLogo\r\n        },\r\n        Others: {\r\n          class: \"text-primary\",\r\n          icon: Chrome,\r\n          img: otherLogo\r\n        }\r\n      }\r\n\r\n      const imgOrIcon = row?.attributes?.user_agent?.family?.replace(/ /g, \"\")\r\n      // console.log(imgOrIcon)\r\n      const Icon = browserObj[imgOrIcon] ? browserObj[imgOrIcon].icon : Info\r\n      const Img = browserObj[imgOrIcon]\r\n        ? browserObj[imgOrIcon].img\r\n        : browserObj[\"Others\"].img\r\n      return (\r\n        <div className=\"d-flex align-items-center\">\r\n          <img className=\"me-1\" src={Img} alt=\"data.json\" height=\"23\" />\r\n          <span className=\"fw-bolder\">\r\n            {row?.attributes.user_agent.family} {t(\"on\")}{\" \"}\r\n            {row?.attributes.os.family} {row?.attributes.os.major} | ip:{\" \"}\r\n            {row?.attributes.ip} | device: {row?.attributes.device.family}{\" \"}\r\n            {row?.attributes.device.model}\r\n          </span>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div className=\"d-flex align-items-center\">\r\n          {/* <h6 className=\"mb-0\">{row.title}</h6>\r\n          <span>{row?.attributes?.description}</span> */}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const RenderIcon = (rows) => {\r\n    const row = rows.row\r\n    // if (row.id_activityCategory === 1) {\r\n    //   return <Lock size={14} />\r\n    // }\r\n    // if (row.id_activityCategory === 2) {\r\n    //   return <PlusCircle size={14} />\r\n    // }\r\n    // if (row.id_activityCategory === 3) {\r\n    //   return <Edit3 size={14} />\r\n    // }\r\n    // if (row.id_activityCategory === 4) {\r\n    //   return <Trash size={14} />\r\n    // } else {\r\n    //   return <Info size={14} />\r\n    // }\r\n    return rows.row?.user?.avatar ? (\r\n      <Avatar\r\n        color=\"light-info\"\r\n        img={rows.row?.user?.avatar}\r\n        initials={!rows.row?.user?.avatar}\r\n      />\r\n    ) : (\r\n      <Avatar\r\n        initials\r\n        color={\"light-info\"}\r\n        content={rows.row?.user?.name || \"John Doe\"}\r\n      />\r\n    )\r\n  }\r\n\r\n  const RenderColor = (row) => {\r\n    // if (row.id_activityCategory === 1) {\r\n    //   return \"danger\"\r\n    // }\r\n    // if (row.id_activityCategory === 2) {\r\n    //   return \"info\"\r\n    // }\r\n    // if (row.id_activityCategory === 3) {\r\n    //   return \"warning\"\r\n    // }\r\n    // if (row.id_activityCategory === 4) {\r\n    //   return \"danger\"\r\n    // } else {\r\n    //   return \"primary\"\r\n    // }\r\n    return null\r\n  }\r\n\r\n  const timeLineData = useMemo(\r\n    () =>\r\n      store.isLoading\r\n        ? Array(10).map(() => ({\r\n            title: <Skeleton width={100} height={50} />,\r\n            content: <Skeleton width={200} height={50} />,\r\n            meta: <Skeleton width={90} height={50} />,\r\n            metaClassName: \"me-1\",\r\n            customContent: <Skeleton width={200} height={50} />\r\n          }))\r\n        : // Moment(data.created_date).locale(\"id\").format(\"DD MMM YYYY\")\r\n          store.data.map((data) => ({\r\n            title: `${data.user.name} ${t(data.title)}`,\r\n            content: `${\r\n              t(data.attributes?.title) ?? t(data.attributes?.description) ?? \"\"\r\n            } ${\r\n              t(data.attributes?.data?.title) ??\r\n              t(data.attributes?.data?.name) ??\r\n              data.attributes?.data?.code ??\r\n              \"\"\r\n            }`,\r\n            icon: <RenderIcon row={data} />,\r\n            // color: RenderColor(data),\r\n            meta: (\r\n              <Moment locale=\"id\" fromNow>\r\n                {data.created_date}\r\n              </Moment>\r\n            ),\r\n            metaClassName: \"me-1\",\r\n            customContent: <RenderDetail row={data} />\r\n          })),\r\n    [store.isLoading, store.data]\r\n  )\r\n\r\n  return (\r\n    <Card style={{ minHeight: \"200px\" }} className=\"card-user-timeline\">\r\n      {!hideCardTitle && (\r\n        <CardHeader>\r\n          <div className=\"d-flex align-items-center\">\r\n            <Users className=\"user-timeline-title-icon\" />\r\n            <CardTitle tag=\"h4\">{t(\"Users Timeline\")}</CardTitle>\r\n          </div>\r\n        </CardHeader>\r\n      )}\r\n      <UILoader blocking={store.isLoading} loader={<Loader />}>\r\n        <CardBody>\r\n          {store.data.length > 0 ? (\r\n            <Timeline className=\"ms-50 mb-0 lastActivity\" data={timeLineData} />\r\n          ) : (\r\n            <div style={{ textAlign: \"center\" }} className=\"align-items-center\">\r\n              {store.error ? (\r\n                <ErrorFetchData message={store.error ?? \"\"} />\r\n              ) : (\r\n                <NoDataDisplay\r\n                  titleCustom={t(\"No Activities.\")}\r\n                  messageCustom={t(\r\n                    \"There is currently no activity from users. It looks like you're the only one logged in to the app.\"\r\n                  )}\r\n                />\r\n              )}\r\n            </div>\r\n          )}\r\n        </CardBody>\r\n      </UILoader>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default WidgetUsersActivity\r\n"],"sourceRoot":""}