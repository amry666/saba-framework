{"version":3,"sources":["utility/generateForm/relationsCrudMenu.js","shared/dynamic_pages/detail/index.js"],"names":["RelationsCrudMenu","relationsCrudData","pageTitle","useParams","moduleId","relPageId","pageId","id","pageType","useState","storeName","store","useSelector","state","dynamicStore","t","useTranslation","navigate","useNavigate","location","useLocation","params","setSectionTitle","handleClick","e","item","preventDefault","pathname","replaceAll","replace","data","length","color","outline","caret","renderIcon","pageAttributes","menuIcon","className","sectionTitle","style","overflowY","maxHeight","tag","active","onClick","divider","map","index","renderLinkMenu","Ripple","console","log","DynamicPage","lazy","DetailPage","ability","useContext","AbilityContext","relPageType","relId","isOrigin","useSearchParams","searchParams","pageAttr","setPageAttr","setStoreName","dispatch","useDispatch","ThemeColors","colors","loading","setLoading","loadingPostPut","setLoadingPostPut","loadingText","setLoadingText","setActive","toggleTab","tab","useLastMenuTabs","lastMenuTabs","setLastMenuTabs","loadingFirst","setLoadingFirst","defValuesAdd","setDefValuesAdd","checkUrlPrivilege","current_page_perm","sessionStorage","getItem","currentPath","can","url1","slice","lastIndexOf","errorToast","res","errorFieldsMsg","payload","error","errors","errorFields","errorx","response","message","toast","padding","danger","main","border","iconTheme","primary","succesToast","type","text","success","hasRelationCrud","hasRelationsCrud","crudOpt","dynamicForm","some","obj","relationsCrud","hasRelationsCrud_onTabs","children","childx","tabContent","childx2","hasRelationsCrud_onColumns","child","reloadOtherPage","afterEditReloadOtherPage","setTimeout","url","store_to_reset","pageData","resetData","afterEditReloadOtherDetailPage","selectedData","data_idField","current_id","getDataById","endpointName","afterAddReloadOtherPage","afterAddReloadOtherDetailPage","redirectOtherPage","defaultUrl","result","resultCount","operator","redirectPageCondition","afterEditRedirectPageCondition","afterAddRedirectPageCondition","it","fieldName","fieldValue","includes","getDepthValue","value","valueType","newfieldValue","Date","newValue","eval","undefined","redirectPageAttr","afterEditRedirectPage","afterAddRedirectPage","defaultPayload","baseUrl","callback_page","window","href","updateDataToApi","url2","gridTheme","putDataTree","then","meta","requestStatus","getApiSummaryAfterPut","getSummaryData","catch","putData","postDataToApi","a","saveAsState","postData","generatedData","generatedId","detailFromGrid","setSelectedData","rowData","resss","getApiSummaryAfterPost","postDataToApiMulti","postDataMulti","handleFormSubmit","postAfterPostData","repeater","handleReset","resetSelectedData","get","findIndex","navLink","handleResetRel","storeMenu","my_menu","getPageAttr","sourceType","dynamicPartUrl","dataMyMenu","find","routePath","currentMenuData","fetch","axiosSso","useJwt","ssoAxiosInterceptor","urlReplacer","storeNameFix","setStorePageAttributes","ress","initDetailData","finally","_","timestamp","getTime","origin","default","newData","json","isLoadingDetail","parseInt","fixId","endpointNameDetail","getFieldTitle","detailPageFieldTitle","Array","isArray","titleFixArr","i","paramValue","parseStrAndField","push","join","detailPageFieldTitleSeparator","getHeaderTitle","values","checkKeyPresenceInArray","key","Object","keys","getDefaultValuesAdd","defValues","search","split","p","pSplit","getParAlias","queryStrAlias","reduce","isNaN","formFillWithFilter","lastParamsKeys","item_det","index_det","useEffect","Prism","highlightAll","storeDeveloper","developer","setEditModeJsonState","isDiscard","setEditModeJson","JSON","stringify","editorValid","setEditorValid","tempJsonAttr","setTempJsonAttr","handleEditorChange","event","setEditModeJsonAttr","handleEditorValidation","markers","saveJson","changedJson","parse","x","renderPage","xl","lg","xs","order","md","size","sx","bgcolor","dark","light","animation","width","height","blocking","overlayColor","loader","detailPageFieldTitleHeader","detailPageFieldSubHeader","target","defaultFormValues","editForm","initialPageId","initialPageAttr","filter","detailPageTitleHeaderAdd","detailPageTitleHeader"],"mappings":"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","file":"static/js/178.c6f09cc5.chunk.js","sourcesContent":["/* eslint-disable no-var */\nimport {\n  Fragment,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n  useCallback,\n  lazy,\n  Suspense\n} from \"react\"\nimport {\n  Row,\n  Col,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownItem,\n  DropdownToggle,\n  TabContent,\n  TabPane,\n  Nav,\n  NavItem,\n  NavLink,\n  Button\n} from \"reactstrap\"\nimport { useNavigate, useLocation, useParams } from \"react-router-dom\"\nimport { useTranslation } from \"react-i18next\"\nimport { useSelector } from \"react-redux\"\nimport \"cleave.js/dist/addons/cleave-phone.us\"\nimport { renderIcon } from \"@src/views/apps/menu/store/my_menu\"\n\nconst RelationsCrudMenu = ({ relationsCrudData, pageTitle }) => {\n  const { moduleId, pageId, id, pageType, relPageId } = useParams()\n  const [storeName, setStoreName] = useState(\n    moduleId ? `${moduleId}_${relPageId}` : `${relPageId}`\n  )\n  const store = useSelector((state) => state.dynamicStore)\n  const { t } = useTranslation()\n  const [active, setActive] = useState(\"1\")\n\n  const toggle = (tab) => {\n    if (active !== tab) {\n      setActive(tab)\n    }\n  }\n  const navigate = useNavigate()\n  const location = useLocation()\n  const params = useParams()\n  const [sectionTitle, setSectionTitle] = useState()\n\n  const handleClick = (e, item) => {\n    e.preventDefault()\n    // console.log(item)\n    setSectionTitle(item.pageTitle)\n    navigate(\n      `${location.pathname.replaceAll(`/${params.relPageId}`, \"\")}/${\n        item.pageId\n      }`,\n      { replace: true }\n    )\n  }\n\n  const renderLinkMenu = (item) => {\n    return (\n      // <Link\n      //   to={`${location.pathname.replaceAll(`/${params.relPageId}`, \"\")}/${\n      //     item.pageId\n      //   }`}\n      // >\n      <DropdownItem\n        active={params.relPageId === item.pageId}\n        key={`menu_${item.pageId}`}\n        onClick={(e) => handleClick(e, item)}\n        // href={`${window.location.href}/${item.pageId}`}\n        tag=\"a\"\n      >\n        {renderIcon(item?.menuIcon, \"me-1 align-middle\", 16, {})}\n        <span className=\"align-middle\">{t(item.pageTitle)}</span>\n      </DropdownItem>\n      // </Link>\n    )\n  }\n\n  return (\n    <Fragment>\n      {relationsCrudData?.data?.length > 1 ? (\n        <UncontrolledButtonDropdown>\n          <DropdownToggle color=\"warning\" outline caret>\n            {renderIcon(\n              store.pageAttributes[storeName]?.menuIcon ?? \"material:info\",\n              \"me-1 align-middle\",\n              16\n            )}\n            <span className=\"d-none d-md-inline align-middle\">\n              {t(\n                store.pageAttributes[storeName]?.pageTitle ??\n                  relationsCrudData?.sectionTitle ??\n                  \"Other Info\"\n              )}\n            </span>\n          </DropdownToggle>\n\n          <DropdownMenu\n            style={{\n              overflowY: \"auto\",\n              maxHeight: \"70vh\"\n            }}\n            tag=\"div\"\n          >\n            {/* <Link\n            to={`${location.pathname.replaceAll(`/${params.relPageId}`, \"\")}`}\n          > */}\n            <DropdownItem\n              active={!params.relPageId}\n              tag=\"a\"\n              onClick={(e) => {\n                e.preventDefault()\n                setSectionTitle(pageTitle)\n                navigate(\n                  `${location.pathname.replaceAll(`/${params.relPageId}`, \"\")}`,\n                  { replace: true }\n                )\n              }}\n            >\n              {renderIcon(\"material:home\", \"me-1 me-1 align-middle\", 16, {})}\n              <span className=\"align-middle\">{t(pageTitle)}</span>\n            </DropdownItem>\n            <DropdownItem divider></DropdownItem>\n            {/* </Link> */}\n            {relationsCrudData?.data?.map((item, index) => {\n              return renderLinkMenu(item)\n            })}\n          </DropdownMenu>\n        </UncontrolledButtonDropdown>\n      ) : params.relPageId === relationsCrudData?.data[0].pageId ? (\n        <Button.Ripple\n          outline\n          onClick={(e) => {\n            e.preventDefault()\n            console.log(params.relPageId)\n            setSectionTitle(pageTitle)\n            navigate(\n              `${location.pathname.replaceAll(`/${params.relPageId}`, \"\")}`,\n              { replace: true }\n            )\n          }}\n          color=\"secondary\"\n        >\n          {renderIcon(\"material:arrow_back\", \"me-1 align-middle\", 16)}\n          <span className=\"align-middle ms-25\">{t(\"Back\")}</span>\n        </Button.Ripple>\n      ) : (\n        <Fragment>\n          <Button\n            onClick={(e) => handleClick(e, relationsCrudData?.data[0])}\n            color=\"relief-warning\"\n          >\n            {renderIcon(\n              relationsCrudData?.data[0].menuIcon ?? \"material:info\",\n              \"me-1 align-middle\",\n              16\n            )}\n            <span className=\"align-middle ms-25\">\n              {t(relationsCrudData?.data[0]?.pageTitle)}\n            </span>\n          </Button>\n        </Fragment>\n      )}\n    </Fragment>\n  )\n}\n\nexport default RelationsCrudMenu\n","/* eslint-disable multiline-ternary */\r\nimport UILoader from \"@components/ui-loader\"\r\nimport { Skeleton } from \"@mui/material\"\r\nimport { Loader } from \"@src/shared/CommonComponents\"\r\nimport { ThemeColors } from \"@src/utility/context/ThemeColors\"\r\nimport DynamicForm from \"@src/utility/generateForm/dynamicForm\"\r\nimport DynamicFormLoading from \"@src/utility/generateForm/dynamicFormLoading\"\r\nimport RelationsCrudMenu from \"@src/utility/generateForm/relationsCrudMenu\"\r\nimport { renderIcon } from \"@src/views/apps/menu/store/my_menu\"\r\nimport \"@styles/react/libs/flatpickr/flatpickr.scss\"\r\nimport \"@styles/react/libs/input-number/input-number.scss\"\r\nimport { getDepthValue, parseStrAndField, urlReplacer } from \"@utils\"\r\nimport { AbilityContext } from \"@src/utility/context/Can\"\r\nimport \"moment/locale/id\"\r\nimport { Fragment, lazy, useContext, useEffect, useState } from \"react\"\r\nimport toast from \"react-hot-toast\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { useLastMenuTabs } from \"@hooks/useLastMenuTabs\"\r\nimport useJwt from \"@src/auth/jwt/useJwt\"\r\nimport {\r\n  useLocation,\r\n  useNavigate,\r\n  useParams,\r\n  useSearchParams\r\n} from \"react-router-dom\"\r\nimport {\r\n  Alert,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Col,\r\n  Row,\r\n  UncontrolledTooltip\r\n} from \"reactstrap\"\r\nimport {\r\n  getDataById,\r\n  getSummaryData,\r\n  postData,\r\n  postDataMulti,\r\n  putData,\r\n  putDataTree,\r\n  resetData,\r\n  resetSelectedData,\r\n  setSelectedData,\r\n  // extraCrud,\r\n  // dynamicForm\r\n  // storeName,\r\n  // pageAttr.pageTitle,\r\n  setStorePageAttributes\r\n} from \"../store\"\r\nimport Prism from \"prismjs\"\r\nimport { setEditModeJson, setEditModeJsonAttr } from \"@store/developer\"\r\n\r\nconst DynamicPage = lazy(() => import(\"@src/shared/dynamic_pages\"))\r\n\r\nconst DetailPage = () => {\r\n  const { t } = useTranslation()\r\n  const ability = useContext(AbilityContext)\r\n  const {\r\n    moduleId,\r\n    pageId,\r\n    id,\r\n    pageType,\r\n    relPageId,\r\n    relPageType,\r\n    relId,\r\n    isOrigin\r\n  } = useParams()\r\n  const [searchParams] = useSearchParams()\r\n  const [pageAttr, setPageAttr] = useState(null)\r\n  const [storeName, setStoreName] = useState(\r\n    moduleId ? `${moduleId}_${pageId}` : `${pageId}`\r\n  )\r\n  const dispatch = useDispatch()\r\n  const store = useSelector((state) => state.dynamicStore)\r\n\r\n  const { colors } = useContext(ThemeColors)\r\n  const [loading, setLoading] = useState(true)\r\n  const [loadingPostPut, setLoadingPostPut] = useState(false)\r\n  const [loadingText, setLoadingText] = useState(\"Please Wait\")\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const [active, setActive] = useState(\"1\")\r\n  const toggleTab = (tab) => {\r\n    if (active !== tab) {\r\n      setActive(tab)\r\n    }\r\n  }\r\n\r\n  const { lastMenuTabs, setLastMenuTabs } = useLastMenuTabs()\r\n\r\n  const [loadingFirst, setLoadingFirst] = useState(true)\r\n  const [defValuesAdd, setDefValuesAdd] = useState({})\r\n\r\n  const checkUrlPrivilege = () => {\r\n    const current_page_perm = sessionStorage.getItem(\"current_page_perm\")\r\n    const currentPath = location.pathname\r\n    if (current_page_perm) {\r\n      // console.log(pageType)\r\n      if (pageType === \"edit\") {\r\n        const canUpdate = ability.can(\r\n          \"update\",\r\n          sessionStorage.getItem(\"current_page_perm\")\r\n        )\r\n        // console.log(canUpdate)\r\n        if (!canUpdate) {\r\n          let url1 = currentPath\r\n            .slice(0, currentPath.lastIndexOf(\"/\"))\r\n            .replaceAll(\"/edit\", \"\")\r\n          // console.log(url1)\r\n          return navigate(url1)\r\n        }\r\n      } else if (pageType === \"add\") {\r\n        const canAdd = ability.can(\r\n          \"post\",\r\n          sessionStorage.getItem(\"current_page_perm\")\r\n        )\r\n        // console.log(canAdd)\r\n        if (!canAdd) {\r\n          let url1 = currentPath.replaceAll(\"/add\", \"\")\r\n          // console.log(url1)\r\n          return navigate(url1)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const errorToast = (res) => {\r\n    let errorFieldsMsg = \"\"\r\n    if (res?.payload?.error?.errors) {\r\n      const errorFields = res?.payload?.error?.errors\r\n      for (let errorx in res?.payload?.error?.errors) {\r\n        errorFieldsMsg = `${errorx} : ${errorFieldsMsg} - ${errorFields[errorx]}\\n`\r\n        // console.log(errorx, errorFields[errorx])\r\n      }\r\n    } else {\r\n      errorFieldsMsg =\r\n        res?.payload?.error?.response?.data?.message ?? \"Error response\"\r\n    }\r\n    return toast.error(\r\n      `${res.payload?.error?.message} \\n \\n ${errorFieldsMsg}`,\r\n      {\r\n        style: {\r\n          padding: \"16px\",\r\n          color: colors.danger.main,\r\n          border: `1px solid ${colors.danger.main}`\r\n        },\r\n        iconTheme: {\r\n          primary: colors.danger.main\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  const succesToast = (type = \"add\") => {\r\n    const text = type === \"add\" ? \"Created\" : \"Updated\"\r\n    return toast.success(\r\n      `${t(`Successfully ${text}`)} ${t(pageAttr.pageTitle)}`,\r\n      {\r\n        style: {\r\n          padding: \"16px\",\r\n          color: colors.success.main,\r\n          border: `1px solid ${colors.success.main}`\r\n        },\r\n        iconTheme: {\r\n          primary: colors.success.main\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  function hasRelationCrud() {\r\n    let hasRelationsCrud = pageAttr?.crudOpt?.data?.dynamicForm?.some(\r\n      (obj) => obj?.type === \"relationsCrud\" || obj?.relationsCrud\r\n    )\r\n\r\n    let hasRelationsCrud_onTabs = pageAttr?.crudOpt?.data?.dynamicForm?.some(\r\n      (item) => {\r\n        if (item.type === \"tabs\") {\r\n          if (item?.children && item?.children?.length > 0) {\r\n            // console.log(\"here\")\r\n            return item.children.map((childx) => {\r\n              if (childx?.tabContent && childx?.tabContent?.length > 0) {\r\n                // console.log(childx)\r\n                return childx.tabContent.some((childx2) => {\r\n                  // console.log(childx2)\r\n                  // console.log(\r\n                  //   childx2.type === \"relationsCrud\" || childx2?.relationsCrud\r\n                  // )\r\n                  return (\r\n                    childx2.type === \"relationsCrud\" || childx2?.relationsCrud\r\n                  )\r\n                })\r\n              }\r\n            })\r\n          }\r\n        }\r\n        return false\r\n      }\r\n    )\r\n\r\n    let hasRelationsCrud_onColumns = pageAttr?.crudOpt?.data?.dynamicForm?.some(\r\n      (item) => {\r\n        if (item.type === \"columns\") {\r\n          if (item?.children && item?.children?.length > 0) {\r\n            return item.children.some(\r\n              (child) => child.type === \"relationsCrud\" || child?.relationsCrud\r\n            )\r\n          }\r\n        }\r\n        return false\r\n      }\r\n    )\r\n\r\n    // console.log(\r\n    //   hasRelationsCrud,\r\n    //   hasRelationsCrud_onTabs,\r\n    //   hasRelationsCrud_onColumns\r\n    // )\r\n    return (\r\n      hasRelationsCrud || hasRelationsCrud_onTabs || hasRelationsCrud_onColumns\r\n    )\r\n  }\r\n\r\n  const reloadOtherPage = (type) => {\r\n    if (type === \"edit\") {\r\n      if (pageAttr?.crudOpt?.afterEditReloadOtherPage) {\r\n        setTimeout(() => {\r\n          pageAttr?.crudOpt?.afterEditReloadOtherPage?.map((url) => {\r\n            const store_to_reset = url.replaceAll(\"/\", \"_\")\r\n            if (store.pageData[store_to_reset]?.data) {\r\n              dispatch(resetData(store_to_reset))\r\n            }\r\n          })\r\n        }, 1000)\r\n      }\r\n\r\n      if (pageAttr?.crudOpt?.afterEditReloadOtherDetailPage) {\r\n        pageAttr?.crudOpt?.afterEditReloadOtherDetailPage?.map((url) => {\r\n          const store_to_reset = url.replaceAll(\"/\", \"_\")\r\n          if (store.pageData[store_to_reset]?.selectedData) {\r\n            const data_idField = pageAttr?.crudOpt?.data_idField\r\n            const current_id = data_idField\r\n              ? store.pageData[store_to_reset].selectedData?.[data_idField]\r\n              : store.pageData[store_to_reset].selectedData?.id\r\n            dispatch(\r\n              getDataById({\r\n                id: current_id,\r\n                storeName: store_to_reset,\r\n                endpointName:\r\n                  store.pageAttributes[store_to_reset]?.crudOpt?.endpointName\r\n              })\r\n            )\r\n          }\r\n        })\r\n      }\r\n    } else if (type === \"add\") {\r\n      if (pageAttr?.crudOpt?.afterAddReloadOtherPage) {\r\n        setTimeout(() => {\r\n          pageAttr?.crudOpt?.afterAddReloadOtherPage?.map((url) => {\r\n            const store_to_reset = url.replaceAll(\"/\", \"_\")\r\n            if (store.pageData[store_to_reset]?.data) {\r\n              dispatch(resetData(store_to_reset))\r\n            }\r\n          })\r\n        }, 1000)\r\n      }\r\n\r\n      if (pageAttr?.crudOpt?.afterAddReloadOtherDetailPage) {\r\n        pageAttr?.crudOpt?.afterAddReloadOtherDetailPage?.map((url) => {\r\n          const store_to_reset = url.replaceAll(\"/\", \"_\")\r\n          if (store.pageData[store_to_reset]?.selectedData) {\r\n            const data_idField = pageAttr?.crudOpt?.data_idField\r\n            const current_id = data_idField\r\n              ? store.pageData[store_to_reset].selectedData?.[data_idField]\r\n              : store.pageData[store_to_reset].selectedData?.id\r\n            dispatch(\r\n              getDataById({\r\n                id: current_id,\r\n                storeName: store_to_reset,\r\n                endpointName:\r\n                  store.pageAttributes[store_to_reset]?.crudOpt?.endpointName\r\n              })\r\n            )\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  const redirectOtherPage = (type, payload, defaultUrl) => {\r\n    let result = false\r\n    let resultCount = 0\r\n    let operator = false\r\n\r\n    let redirectPageCondition =\r\n      type === \"edit\"\r\n        ? pageAttr?.crudOpt?.afterEditRedirectPageCondition\r\n        : pageAttr?.crudOpt?.afterAddRedirectPageCondition\r\n    if (redirectPageCondition) {\r\n      redirectPageCondition?.map((it) => {\r\n        ////fungsi ini seharusnya sama dengan check condition di dynamicForm\r\n        let fieldName = it?.fieldName\r\n        let fieldValue = fieldName.includes(\".\")\r\n          ? getDepthValue(payload, fieldName, null)\r\n          : payload[fieldName]\r\n\r\n        if (it?.operator && it?.value) {\r\n          operator = true\r\n          if (it?.valueType === \"datetime\" || it?.valueType === \"date\") {\r\n            const newfieldValue = new Date(fieldValue)\r\n\r\n            let newValue = null\r\n            if (it?.value === \"today\") {\r\n              newValue = new Date()\r\n            } else {\r\n              newValue = new Date(it?.value)\r\n            }\r\n\r\n            if (it?.operator === \">\") {\r\n              result = newfieldValue > newValue\r\n            } else if (it?.operator === \">=\") {\r\n              result = newfieldValue >= newValue\r\n            } else if (it?.operator === \"<\") {\r\n              result = newfieldValue < newValue\r\n            } else if (it?.operator === \"<=\") {\r\n              result = newfieldValue <= newValue\r\n            } else {\r\n              result = newfieldValue === newValue\r\n            }\r\n          } else if (it?.valueType === \"boolean\") {\r\n            if (it?.operator === \"===\") {\r\n              result = fieldValue === it?.value\r\n            } else if (it?.operator === \"!==\") {\r\n              result = fieldValue !== it?.value\r\n            }\r\n          } else {\r\n            result = eval(`\"${fieldValue}\"${it?.operator}\"${it?.value}\"`)\r\n          }\r\n        } else {\r\n          resultCount++\r\n          result =\r\n            result +\r\n            (fieldValue !== null &&\r\n              fieldValue !== undefined &&\r\n              fieldValue !== \"undefined\" &&\r\n              fieldValue !== \"\")\r\n        }\r\n      })\r\n    }\r\n\r\n    let redirectPageAttr =\r\n      type === \"edit\"\r\n        ? pageAttr?.crudOpt?.afterEditRedirectPage\r\n        : pageAttr?.crudOpt?.afterAddRedirectPage\r\n\r\n    if (!result) {\r\n      if (defaultUrl) {\r\n        return navigate(defaultUrl)\r\n      }\r\n    } else {\r\n      if (redirectPageAttr) {\r\n        return navigate(`/dyn_pages/${redirectPageAttr}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  const defaultPayload = {\r\n    storeName: storeName,\r\n    endpointName: pageAttr?.crudOpt?.endpointName,\r\n    baseUrl: pageAttr?.crudOpt?.baseUrl,\r\n    callback_page: window.location.href\r\n  }\r\n\r\n  const updateDataToApi = (data, postAfterPostData = null) => {\r\n    data = { ...data, ...defaultPayload }\r\n    const url1 = location.pathname.slice(0, location.pathname.lastIndexOf(\"/\"))\r\n    const url2 = url1.slice(0, url1.lastIndexOf(\"/\"))\r\n    // console.log(data)\r\n    setLoadingText(\r\n      `${t(\"Updating\")} ${t(pageAttr.pageTitle)} ${t(\"Detail\")} Data`\r\n    )\r\n    setLoadingPostPut(!loadingPostPut)\r\n    if (pageAttr?.crudOpt?.gridTheme === \"treeview\") {\r\n      dispatch(putDataTree(data))\r\n        .then((res) => {\r\n          setLoadingPostPut(!loadingPostPut)\r\n          if (res.meta.requestStatus === \"fulfilled\") {\r\n            if (pageAttr?.crudOpt?.getApiSummaryAfterPut) {\r\n              dispatch(\r\n                getSummaryData({\r\n                  endpointName: pageAttr?.crudOpt?.endpointName,\r\n                  storeName: storeName,\r\n                  baseUrl: pageAttr?.crudOpt?.baseUrl\r\n                })\r\n              )\r\n            }\r\n            reloadOtherPage(\"edit\")\r\n\r\n            redirectOtherPage(\"edit\", data, url2)\r\n            // navigate(url2)\r\n            succesToast(\"edit\")\r\n          } else if (res.meta.requestStatus === \"rejected\") {\r\n            errorToast(res)\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(error)\r\n          errorToast(error)\r\n        })\r\n    } else {\r\n      dispatch(putData(data))\r\n        .then((res) => {\r\n          // console.log(res)\r\n          setLoadingPostPut(false)\r\n          if (res.meta.requestStatus === \"fulfilled\") {\r\n            // if (postAfterPostData) {\r\n            //   dispatch(postData(data))\r\n            //     .then((res) => {\r\n            //       setLoadingPostPut(false)\r\n            //       if (res.meta.requestStatus === \"fulfilled\") {\r\n            //         succesToast(\"add\")\r\n            //       } else if (res.meta.requestStatus === \"rejected\") {\r\n            //         errorToast(res)\r\n            //       }\r\n            //     })\r\n            //     .catch((error) => {\r\n            //       errorToast(error)\r\n            //     })\r\n            // }\r\n            if (pageAttr?.crudOpt?.getApiSummaryAfterPut) {\r\n              dispatch(\r\n                getSummaryData({\r\n                  endpointName: pageAttr?.crudOpt?.endpointName,\r\n                  storeName: storeName,\r\n                  baseUrl: pageAttr?.crudOpt?.baseUrl\r\n                })\r\n              )\r\n            }\r\n            reloadOtherPage(\"edit\")\r\n\r\n            redirectOtherPage(\"edit\", data, url2)\r\n            succesToast(\"edit\")\r\n            // navigate(url2)\r\n          } else if (res.meta.requestStatus === \"rejected\") {\r\n            errorToast(res)\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(error)\r\n          errorToast(error)\r\n        })\r\n    }\r\n  }\r\n\r\n  const postDataToApi = async (\r\n    data,\r\n    postAfterPostData = null,\r\n    saveAsState = false\r\n  ) => {\r\n    data = { ...data, ...defaultPayload }\r\n    let url1 = location.pathname.slice(0, location.pathname.lastIndexOf(\"/\"))\r\n    setLoadingText(`${t(`Creating`)} ${pageAttr.pageTitle}`)\r\n    setLoadingPostPut(true)\r\n    dispatch(postData(data))\r\n      .then((res) => {\r\n        setLoadingPostPut(false)\r\n        if (res.meta.requestStatus === \"fulfilled\") {\r\n          // let hasRelationsCrud = pageAttr?.crudOpt?.data?.dynamicForm.some(\r\n          //   (obj) => obj?.type === \"relationsCrud\" || obj?.relationsCrud\r\n          // )\r\n\r\n          // console.log(hasRelationCrud(), saveAsState)\r\n          if (hasRelationCrud() && !saveAsState) {\r\n            let generatedData = res?.payload?.data?.data\r\n            let generatedId = generatedData?.id\r\n            if (generatedId) {\r\n              if (!pageAttr?.crudOpt?.detailFromGrid) {\r\n                url1 = `${location.pathname.slice(\r\n                  0,\r\n                  location.pathname.lastIndexOf(\"/\")\r\n                )}/edit/${generatedId}?refresh=true`\r\n              } else {\r\n                url1 = `${location.pathname.slice(\r\n                  0,\r\n                  location.pathname.lastIndexOf(\"/\")\r\n                )}/edit/${generatedId}`\r\n                dispatch(\r\n                  setSelectedData({\r\n                    rowData: generatedData,\r\n                    storeName: storeName\r\n                  })\r\n                ).then((resss) => {\r\n                  console.log(resss)\r\n                })\r\n              }\r\n            }\r\n          }\r\n\r\n          // console.log(url1)\r\n\r\n          if (saveAsState) {\r\n            url1 = url1.replaceAll(\"/edit\", \"\").replaceAll(\"/add\", \"\")\r\n          }\r\n\r\n          succesToast(\"add\")\r\n          if (pageAttr?.crudOpt?.getApiSummaryAfterPost) {\r\n            dispatch(\r\n              getSummaryData({\r\n                endpointName: pageAttr?.crudOpt?.endpointName,\r\n                storeName: storeName,\r\n                baseUrl: pageAttr?.crudOpt?.baseUrl\r\n              })\r\n            )\r\n          }\r\n          reloadOtherPage(\"add\")\r\n          // console.log(url1)\r\n          navigate(url1)\r\n        } else if (res.meta.requestStatus === \"rejected\") {\r\n          errorToast(res)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        errorToast(error)\r\n      })\r\n  }\r\n\r\n  const postDataToApiMulti = (data) => {\r\n    data = { ...data, ...defaultPayload }\r\n    let url1 = location.pathname.slice(0, location.pathname.lastIndexOf(\"/\"))\r\n    setLoadingText(`${t(`Creating`)} ${pageAttr.pageTitle}`)\r\n    setLoadingPostPut(true)\r\n    dispatch(postDataMulti(data))\r\n      .then((res) => {\r\n        setLoadingPostPut(false)\r\n        if (res.meta.requestStatus === \"fulfilled\") {\r\n          if (hasRelationCrud()) {\r\n            let generatedData = res?.payload?.data?.data\r\n            let generatedId = generatedData?.id\r\n            if (generatedId) {\r\n              if (!pageAttr?.crudOpt?.detailFromGrid) {\r\n                url1 = `${location.pathname.slice(\r\n                  0,\r\n                  location.pathname.lastIndexOf(\"/\")\r\n                )}/edit/${generatedId}?refresh=true`\r\n              } else {\r\n                url1 = `${location.pathname.slice(\r\n                  0,\r\n                  location.pathname.lastIndexOf(\"/\")\r\n                )}/edit/${generatedId}`\r\n                dispatch(\r\n                  setSelectedData({\r\n                    rowData: generatedData,\r\n                    storeName: storeName\r\n                  })\r\n                ).then((resss) => {})\r\n              }\r\n            }\r\n          }\r\n          navigate(url1)\r\n          succesToast(\"add\")\r\n          if (pageAttr?.crudOpt?.getApiSummaryAfterPost) {\r\n            dispatch(\r\n              getSummaryData({\r\n                endpointName: pageAttr?.crudOpt?.endpointName,\r\n                storeName: storeName,\r\n                baseUrl: pageAttr?.crudOpt?.baseUrl\r\n              })\r\n            )\r\n          }\r\n\r\n          reloadOtherPage(\"add\")\r\n        } else if (res.meta.requestStatus === \"rejected\") {\r\n          errorToast(res)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        errorToast(error)\r\n      })\r\n  }\r\n\r\n  const handleFormSubmit = (\r\n    data,\r\n    postAfterPostData = null,\r\n    saveAsState = false\r\n  ) => {\r\n    ///prevent duplicate event with modal because relationsCrud FORM on FOrm / nested form\r\n    // console.log(data)\r\n    if ((pageType === \"edit\" || pageType === \"view\") && !saveAsState) {\r\n      updateDataToApi(data, postAfterPostData)\r\n    } else {\r\n      if (!saveAsState) {\r\n        if (data?.repeater) {\r\n          postDataToApiMulti(data, postAfterPostData)\r\n        } else {\r\n          postDataToApi(data, postAfterPostData)\r\n        }\r\n      } else {\r\n        // console.log(saveAsState)\r\n        // console.log(data)\r\n        // console.log(postAfterPostData)\r\n        postDataToApi(data, postAfterPostData, saveAsState)\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleReset() {\r\n    dispatch(resetSelectedData(storeName))\r\n    if (searchParams.get(\"isOrigin\") === \"true\") {\r\n      return navigate(-1)\r\n    } else {\r\n      if (pageType === \"edit\" || pageType === \"view\") {\r\n        const url1 = location.pathname.slice(\r\n          0,\r\n          location.pathname.lastIndexOf(\"/\")\r\n        )\r\n        const url2 = url1.slice(0, url1.lastIndexOf(\"/\"))\r\n        if (lastMenuTabs) {\r\n          let find = lastMenuTabs.findIndex(\r\n            (item) => item.navLink === location.pathname\r\n          )\r\n          if (find !== -1) {\r\n            setLastMenuTabs(null, url2, null)\r\n            return navigate(url2)\r\n          } else {\r\n            return navigate(url2)\r\n          }\r\n        } else {\r\n          return navigate(url2)\r\n        }\r\n      } else {\r\n        if (lastMenuTabs) {\r\n          let find = lastMenuTabs.findIndex(\r\n            (item) => item.navLink === location.pathname\r\n          )\r\n          if (find !== -1) {\r\n            const url1 = location.pathname.slice(\r\n              0,\r\n              location.pathname.lastIndexOf(\"/\")\r\n            )\r\n            setLastMenuTabs(null, url1, null)\r\n            return navigate(url1)\r\n          } else {\r\n            return navigate(-1)\r\n          }\r\n        } else {\r\n          return navigate(-1)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleResetRel() {\r\n    return navigate(`${location.pathname.replaceAll(`/${relPageId}`, \"\")}`, {\r\n      replace: true\r\n    })\r\n  }\r\n\r\n  const storeMenu = useSelector((state) => state.my_menu)\r\n  const getPageAttr = async (sourceType) => {\r\n    // console.log(window.location.pathname)\r\n    let dynamicPartUrl = window.location.pathname.replace(\r\n      /\\/(edit|view|add)(\\/.*)?$/,\r\n      \"\"\r\n    )\r\n    // console.log(dynamicPartUrl)\r\n    let currentMenuData = await storeMenu?.dataMyMenu?.find(\r\n      (item) => item?.routePath === dynamicPartUrl\r\n    )\r\n    const needFetch = currentMenuData?.fetch\r\n    if (needFetch) {\r\n      const axiosSso = useJwt.ssoAxiosInterceptor\r\n      await axiosSso\r\n        .get(`/api/my_info/menu/${currentMenuData.id}`)\r\n        .then((res) => {\r\n          // console.log(res)\r\n          const data = res?.data?.data\r\n          const newData = urlReplacer(data)\r\n          return newData\r\n        })\r\n        .then((data) => {\r\n          // console.log(data)\r\n          setPageAttr(data)\r\n          // console.log(data)\r\n          const storeNameFix = moduleId ? `${moduleId}_${pageId}` : `${pageId}`\r\n          setStoreName(storeNameFix)\r\n          dispatch(setStorePageAttributes({ storeName: storeNameFix, data }))\r\n          return data\r\n        })\r\n        .then((ress) => {\r\n          initDetailData(ress)\r\n        })\r\n        .finally((_) => {\r\n          setLoadingFirst(false)\r\n          setLoading(false)\r\n        })\r\n        .catch((error) => {\r\n          console.error(error)\r\n          setLoadingFirst(false)\r\n          setLoading(false)\r\n        })\r\n    } else {\r\n      const timestamp = new Date().getTime()\r\n      let url = `${window.location.origin}/pageAttributes/${pageId}.json?timestamp=${timestamp}`\r\n      if (moduleId) {\r\n        if (moduleId === \"_admin_\") {\r\n          await import(`@src/views/admin_pages/${pageId}.json`)\r\n            .then((res) => {\r\n              const data = res.default\r\n              const newData = urlReplacer(data)\r\n              setPageAttr(data)\r\n              // console.log(data)\r\n              const storeNameFix = moduleId\r\n                ? `${moduleId}_${pageId}`\r\n                : `${pageId}`\r\n              setStoreName(storeNameFix)\r\n              dispatch(\r\n                setStorePageAttributes({\r\n                  storeName: storeNameFix,\r\n                  data: newData\r\n                })\r\n              )\r\n              return newData\r\n            })\r\n            .then((ress) => {\r\n              initDetailData(ress)\r\n            })\r\n            .finally((_) => {\r\n              setLoadingFirst(false)\r\n              setLoading(false)\r\n            })\r\n            .catch((error) => {\r\n              console.error(error)\r\n              setLoadingFirst(false)\r\n              setLoading(false)\r\n            })\r\n        } else {\r\n          const timestamp = new Date().getTime()\r\n          url = `${window.location.origin}/pageAttributes/${moduleId}/${pageId}.json?timestamp=${timestamp}`\r\n          await fetch(url)\r\n            .then(function (res) {\r\n              return res.json()\r\n            })\r\n            .then((data) => {\r\n              const newData = urlReplacer(data)\r\n              // console.log(data)\r\n              setPageAttr(newData)\r\n              // console.log(data)\r\n              const storeNameFix = moduleId\r\n                ? `${moduleId}_${pageId}`\r\n                : `${pageId}`\r\n              setStoreName(storeNameFix)\r\n              dispatch(\r\n                setStorePageAttributes({\r\n                  storeName: storeNameFix,\r\n                  data: newData\r\n                })\r\n              )\r\n              return newData\r\n            })\r\n            .then((ress) => {\r\n              initDetailData(ress)\r\n            })\r\n            .finally((_) => {\r\n              setLoadingFirst(false)\r\n              setLoading(false)\r\n            })\r\n            .catch((error) => {\r\n              console.error(error)\r\n              setLoadingFirst(false)\r\n              setLoading(false)\r\n            })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const initDetailData = (data) => {\r\n    // console.log(\"initDetailData\")\r\n    if (\r\n      (pageType === \"edit\" || pageType === \"view\") &&\r\n      !store.pageData[storeName]?.isLoadingDetail &&\r\n      (!store.pageData[storeName]?.selectedData ||\r\n        searchParams.get(\"refresh\") === \"1\" ||\r\n        searchParams.get(\"refresh\") === \"true\" ||\r\n        store.pageData[storeName]?.selectedData?.id !== parseInt(relId ?? id))\r\n    ) {\r\n      setLoadingText(\r\n        `${t(\"Loading\")} ${t(\"Detail\")} ${t(\"Data\")} ${t(data.pageTitle)}`\r\n      )\r\n      const fixId = relId ?? id\r\n      setLoading(true)\r\n      setLoadingFirst(true)\r\n      dispatch(\r\n        getDataById({\r\n          id: fixId,\r\n          storeName: storeName,\r\n          baseUrl: data?.crudOpt?.baseUrl,\r\n          endpointName:\r\n            data?.crudOpt?.endpointNameDetail ?? data?.crudOpt?.endpointName,\r\n          baseUrl: data?.crudOpt?.baseUrl\r\n        })\r\n      ).then((res) => {\r\n        setLoading(false)\r\n        setLoadingFirst(false)\r\n      })\r\n    } else {\r\n      setLoading(false)\r\n      setLoadingFirst(false)\r\n    }\r\n  }\r\n\r\n  const getFieldTitle = () => {\r\n    if (store.pageAttributes[storeName]?.crudOpt?.detailPageFieldTitle) {\r\n      const detailPageFieldTitle = pageAttr?.crudOpt?.detailPageFieldTitle\r\n      let result = \"\"\r\n      if (Array.isArray(detailPageFieldTitle)) {\r\n        let titleFixArr = []\r\n        detailPageFieldTitle.map((it, i) => {\r\n          let paramValue = parseStrAndField(\r\n            store.pageData[storeName]?.selectedData,\r\n            it\r\n          )\r\n          titleFixArr.push(paramValue)\r\n          result = titleFixArr.join(\r\n            pageAttr?.crudOpt?.detailPageFieldTitleSeparator ?? \" \"\r\n          )\r\n        })\r\n      } else if (\r\n        store.pageData[storeName]?.selectedData?.[detailPageFieldTitle]\r\n      ) {\r\n        result = store.pageData[storeName]?.selectedData?.[detailPageFieldTitle]\r\n      }\r\n      return result\r\n    }\r\n  }\r\n\r\n  const getHeaderTitle = (value) => {\r\n    let result = \"\"\r\n    if (Array.isArray(value)) {\r\n      let values = []\r\n      value.map((it, i) => {\r\n        let paramValue = parseStrAndField(\r\n          store.pageData[storeName]?.selectedData,\r\n          it\r\n        )\r\n        values.push(paramValue)\r\n      })\r\n      result = values.join(\" \")\r\n    } else if (store.pageData[storeName]?.selectedData?.[value]) {\r\n      result = store.pageData[storeName]?.selectedData?.[value]\r\n    }\r\n    return result\r\n  }\r\n\r\n  const checkKeyPresenceInArray = (data, key) =>\r\n    data.some((obj) => Object.keys(obj).includes(key))\r\n\r\n  const getDefaultValuesAdd = () => {\r\n    if (\r\n      pageType !== \"edit\" &&\r\n      pageType !== \"view\" &&\r\n      pageType !== \"add-child\"\r\n    ) {\r\n      let defValues = location.search\r\n        ? location.search\r\n            .slice(1)\r\n            .split(\"&\")\r\n            .map((p) => {\r\n              let cleanP = p.replace(\"?\", \"\")\r\n              let pSplit = cleanP.split(\"=\")\r\n              let getParAlias = pageAttr?.crudOpt?.data?.dynamicForm?.find(\r\n                (item) => item?.queryStrAlias === pSplit[0]\r\n              )\r\n              if (getParAlias) {\r\n                pSplit[0] = getParAlias?.fieldName\r\n              }\r\n              return pSplit\r\n            })\r\n            .reduce(\r\n              (obj, [key, value]) => ({\r\n                ...obj,\r\n                [key]:\r\n                  ////CONVERT VALUE FROM QUERY STRING TO INTEGER IF POSSIBLE\r\n                  !isNaN(value) && (key?.includes(\"id\") || key?.includes(\"Id\"))\r\n                    ? +value\r\n                    : value\r\n              }),\r\n              {}\r\n            )\r\n        : {}\r\n\r\n      // FILL FORM WITH LAST GRID PARAMS IF PAGETYPE === ADD\r\n      let formFillWithFilter = {}\r\n      if (store.pageData[storeName]?.params) {\r\n        const lastParamsKeys = Object.keys(store.pageData[storeName]?.params)\r\n          .length\r\n          ? Object.keys(store.pageData[storeName]?.params)\r\n          : null\r\n\r\n        pageAttr?.crudOpt?.data?.dynamicForm?.map((item, index) => {\r\n          // console.log(\r\n          //   item?.fieldName,\r\n          //   store.pageData[storeName]?.params[item?.fieldName]\r\n          // )\r\n          if (item?.children) {\r\n            item?.children?.map((item_det, index_det) => {\r\n              if (\r\n                lastParamsKeys &&\r\n                store.pageData[storeName]?.params[item_det?.fieldName]\r\n              ) {\r\n                formFillWithFilter[item_det?.fieldName] =\r\n                  store.pageData[storeName]?.params[item_det?.fieldName]\r\n              }\r\n            })\r\n          } else {\r\n            if (\r\n              lastParamsKeys &&\r\n              store.pageData[storeName]?.params[item?.fieldName]\r\n            ) {\r\n              formFillWithFilter[item?.fieldName] =\r\n                store.pageData[storeName]?.params[item?.fieldName]\r\n            }\r\n          }\r\n        })\r\n      }\r\n\r\n      // console.log({ ...defValues, ...formFillWithFilter })\r\n      // setDefValuesAdd({ ...defValues, ...formFillWithFilter })\r\n      return { ...defValues, ...formFillWithFilter }\r\n    } else {\r\n      return {}\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // console.log(storeName, relPageId, store.pageAttributes[storeName])\r\n\r\n    checkUrlPrivilege()\r\n\r\n    if (pageId) {\r\n      setLoadingFirst(true)\r\n      if (!store.pageAttributes[storeName]) {\r\n        // getPageAttr(\"file\")\r\n        getPageAttr()\r\n      } else {\r\n        if (\r\n          searchParams.get(\"refresh\") === \"1\" ||\r\n          searchParams.get(\"refresh\") === \"true\"\r\n        ) {\r\n          initDetailData(store.pageAttributes[storeName])\r\n        }\r\n\r\n        setPageAttr(store.pageAttributes[storeName])\r\n        // console.log(`get getPageAttr from cache`)\r\n        setLoadingFirst(false)\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    Prism.highlightAll()\r\n    // setLastMenuTabs(null, window.location)\r\n  }, [pageAttr, store.pageAttributes[storeName]])\r\n\r\n  const storeDeveloper = useSelector((state) => state.developer)\r\n  const setEditModeJsonState = (e, isDiscard = false) => {\r\n    e.preventDefault()\r\n    dispatch(\r\n      isDiscard\r\n        ? setEditModeJson({ storeName })\r\n        : setEditModeJson({\r\n            storeName,\r\n            pageAttr: JSON.stringify(pageAttr, null, 2)\r\n          })\r\n    ).then(() => {})\r\n  }\r\n\r\n  const [editorValid, setEditorValid] = useState(true)\r\n  const [tempJsonAttr, setTempJsonAttr] = useState(\"\")\r\n  function handleEditorChange(value, event) {\r\n    setEditorValid(true)\r\n    setTempJsonAttr(value)\r\n    dispatch(\r\n      setEditModeJsonAttr({\r\n        storeName,\r\n        pageAttr: value\r\n      })\r\n    ).then((res) => {\r\n      // console.log(res)\r\n    })\r\n  }\r\n\r\n  function handleEditorValidation(markers) {\r\n    setEditorValid(markers?.length === 0)\r\n  }\r\n\r\n  function saveJson(e) {\r\n    const changedJson = JSON.parse(tempJsonAttr)\r\n    dispatch(setStorePageAttributes({ storeName, data: {} })).then((x) => {\r\n      dispatch(setStorePageAttributes({ storeName, data: changedJson })).then(\r\n        (result) => {\r\n          console.log(result)\r\n          setPageAttr(changedJson)\r\n\r\n          setTimeout(() => {\r\n            renderPage()\r\n          }, 50)\r\n\r\n          setTimeout(() => {\r\n            setEditModeJsonState(e)\r\n          }, 100)\r\n        }\r\n      )\r\n    })\r\n  }\r\n\r\n  if (pageAttr && store.pageAttributes[storeName]) {\r\n    return !loading && !store.pageData[storeName]?.isLoadingDetail ? (\r\n      pageType === \"edit\" || pageType === \"view\" || pageType === \"add-child\" ? (\r\n        <Fragment>\r\n          {store.pageData[storeName]?.selectedData || relPageId ? (\r\n            <div className=\"app-user-view\">\r\n              <Row>\r\n                <Col\r\n                  xl=\"12\"\r\n                  lg=\"12\"\r\n                  xs={{ order: 1 }}\r\n                  md={{ order: 0, size: 6 }}\r\n                >\r\n                  <UILoader\r\n                    blocking={loadingPostPut}\r\n                    overlayColor=\"rgba(115, 103, 240, .1)\"\r\n                    loader={<Loader loadingText={loadingText} />}\r\n                  >\r\n                    <Card>\r\n                      <CardHeader className=\"pe-0\">\r\n                        <Row className=\"w-100 align-items-center\">\r\n                          <Col md={8} xs={10}>\r\n                            {pageAttr?.crudOpt?.detailPageFieldTitleHeader &&\r\n                            (pageType === \"edit\" || pageType === \"view\") ? (\r\n                              <h2 className=\"saba-detail-header mb-25\">\r\n                                {getHeaderTitle(\r\n                                  pageAttr?.crudOpt?.detailPageFieldTitleHeader\r\n                                )}\r\n                              </h2>\r\n                            ) : (\r\n                              <h2 className=\"saba-detail-header mb-25\">\r\n                                {pageType === \"edit\" ? t(\"Edit\") : t(\"Detail\")}{\" \"}\r\n                                {t(pageAttr.pageTitle)}\r\n                              </h2>\r\n                            )}\r\n\r\n                            {pageAttr?.crudOpt?.detailPageFieldSubHeader &&\r\n                              (pageType === \"edit\" || pageType === \"view\") && (\r\n                                <small className=\"saba-detail-sub-header\">\r\n                                  {getHeaderTitle(\r\n                                    pageAttr?.crudOpt?.detailPageFieldSubHeader\r\n                                  )}\r\n                                </small>\r\n                              )}\r\n                          </Col>\r\n                          <Col\r\n                            className={`pe-50 ${getFieldTitle() ? \"mb-1\" : \"\"}`}\r\n                            md={4}\r\n                            xs={2}\r\n                          >\r\n                            <div className=\"d-flex align-items-center  justify-content-end\">\r\n                              {pageAttr?.crudOpt?.data?.relationsCrud &&\r\n                                pageAttr?.crudOpt?.data?.relationsCrud?.data\r\n                                  ?.length > 0 && (\r\n                                  <RelationsCrudMenu\r\n                                    relationsCrudData={\r\n                                      pageAttr.crudOpt.data.relationsCrud\r\n                                    }\r\n                                    storeName={storeName}\r\n                                    pageTitle={pageAttr.pageTitle}\r\n                                  />\r\n                                )}\r\n                              {(pageAttr?.crudOpt?.data?.relationsCrud?.data\r\n                                ?.length > 1 ||\r\n                                !relPageId) &&\r\n                                pageAttr?.pageType !== \"detail-page\" && (\r\n                                  <Fragment>\r\n                                    <Button.Ripple\r\n                                      className=\"ms-1 d-none d-md-block\"\r\n                                      id=\"btn-detail-back\"\r\n                                      outline\r\n                                      onClick={(e) => {\r\n                                        !relPageId\r\n                                          ? handleReset()\r\n                                          : handleResetRel()\r\n                                      }}\r\n                                      color=\"secondary\"\r\n                                    >\r\n                                      {renderIcon(\r\n                                        \"material:arrow_back\",\r\n                                        // \"me-1 align-middle\",\r\n                                        \"align-middle\",\r\n                                        16\r\n                                      )}\r\n                                      {/* <span className=\"align-middle ms-25\">\r\n                                    {t(\"Back\")}\r\n                                  </span> */}\r\n                                    </Button.Ripple>\r\n                                    <UncontrolledTooltip target=\"btn-detail-back\">\r\n                                      {t(\"Back\")}\r\n                                    </UncontrolledTooltip>\r\n                                  </Fragment>\r\n                                )}\r\n                            </div>\r\n                          </Col>\r\n                          {store.pageData[storeName]?.selectedData &&\r\n                            getFieldTitle() &&\r\n                            getFieldTitle() !== \"\" && (\r\n                              <Col md={12}>\r\n                                <p className=\"font-small-3 fw-bolder mb-0 saba-detail-header-title\">\r\n                                  {getFieldTitle()}\r\n                                </p>\r\n                              </Col>\r\n                            )}\r\n                        </Row>\r\n                      </CardHeader>\r\n                      <CardBody>\r\n                        {!relPageId || (relPageType && relId) ? (\r\n                          <DynamicForm\r\n                            key={`dynamicForm_${storeName}`}\r\n                            pageAttr={pageAttr}\r\n                            dynamicForm={pageAttr?.crudOpt?.data?.dynamicForm}\r\n                            storeName={storeName}\r\n                            handleReset={handleReset}\r\n                            handleFormSubmit={handleFormSubmit}\r\n                            defaultFormValues={JSON.parse(\r\n                              JSON.stringify(\r\n                                store.pageData[storeName]?.selectedData\r\n                              ).replace(/\\:null/gi, ':\"\"')\r\n                            )}\r\n                            editForm={true}\r\n                            pageType={pageType}\r\n                          />\r\n                        ) : (\r\n                          // <RelationsCrud />\r\n                          <DynamicPage\r\n                            initialPageId={relPageId}\r\n                            initialPageAttr={\r\n                              pageAttr.crudOpt.data.relationsCrud?.data.filter(\r\n                                (item) => item.pageId === relPageId\r\n                              )[0]\r\n                            }\r\n                          />\r\n                        )}\r\n                      </CardBody>\r\n                    </Card>\r\n                  </UILoader>\r\n                </Col>\r\n                {/* <Col xl=\"12\" lg=\"12\" xs={{ order: 0 }} md={{ order: 1, size: 7 }}>\r\n                  {(pageType) === \"edit\" && (\r\n                    <ExtraCrud\r\n                      extraCrud={pageAttr?.crudOpt?.data?.extraCrud}\r\n                      storeName={storeName}\r\n                      id={relId ?? id}\r\n                    />\r\n                  )}\r\n                </Col> */}\r\n              </Row>\r\n            </div>\r\n          ) : (\r\n            <Alert color=\"danger\">\r\n              <h4 className=\"alert-heading\">\r\n                {t(pageAttr.pageTitle)} {t(\"not found\")}\r\n              </h4>\r\n              <div className=\"alert-body\">\r\n                {t(`${pageAttr.pageTitle} with id`)}: {relId ?? id}{\" \"}\r\n                {t(\"doesn't exist.\")}:{\" \"}\r\n              </div>\r\n            </Alert>\r\n          )}\r\n        </Fragment>\r\n      ) : (\r\n        <div className=\"app-user-view\">\r\n          <Row>\r\n            <Col xl=\"12\" lg=\"12\" xs={{ order: 1 }} md={{ order: 0, size: 5 }}>\r\n              <UILoader\r\n                blocking={loadingPostPut}\r\n                overlayColor=\"rgba(115, 103, 240, .1)\"\r\n                loader={<Loader loadingText={loadingText} />}\r\n              >\r\n                <Card>\r\n                  <CardHeader>\r\n                    <Row className=\"w-100 align-items-center mx-0\">\r\n                      <Col md={8} xs={10} className=\"ps-0\">\r\n                        <h2 className=\"saba-detail-header\">\r\n                          {pageAttr?.crudOpt?.detailPageTitleHeaderAdd ??\r\n                            pageAttr?.crudOpt?.detailPageTitleHeader ??\r\n                            `${t(\"Add\")} ${t(pageAttr.pageTitle)}`}\r\n                        </h2>\r\n                      </Col>\r\n                      <Col\r\n                        className={`pe-0 ${getFieldTitle() ? \"mb-1\" : \"\"}`}\r\n                        md={4}\r\n                        xs={2}\r\n                      >\r\n                        <div className=\"d-flex align-items-center  justify-content-end\">\r\n                          <Button.Ripple\r\n                            className=\"ms-1 d-none d-md-block\"\r\n                            id=\"btn-detail-back\"\r\n                            outline\r\n                            onClick={(e) => {\r\n                              !relPageId ? handleReset() : handleResetRel()\r\n                            }}\r\n                            color=\"secondary\"\r\n                          >\r\n                            {renderIcon(\r\n                              \"material:arrow_back\",\r\n                              // \"me-1 align-middle\",\r\n                              \"align-middle\",\r\n                              16\r\n                            )}\r\n                            {/* <span className=\"align-middle ms-25\">\r\n                                    {t(\"Back\")}\r\n                                  </span> */}\r\n                          </Button.Ripple>\r\n                          <UncontrolledTooltip target=\"btn-detail-back\">\r\n                            {t(\"Back\")}\r\n                          </UncontrolledTooltip>\r\n                        </div>\r\n                      </Col>\r\n                    </Row>\r\n                  </CardHeader>\r\n                  <CardBody>\r\n                    <DynamicForm\r\n                      dynamicForm={pageAttr?.crudOpt?.data?.dynamicForm}\r\n                      pageAttr={pageAttr}\r\n                      storeName={storeName}\r\n                      handleReset={handleReset}\r\n                      handleFormSubmit={handleFormSubmit}\r\n                      // defaultFormValues={defValuesAdd}\r\n                      defaultFormValues={getDefaultValuesAdd()}\r\n                      editForm={false}\r\n                      pageType={pageType}\r\n                    />\r\n                  </CardBody>\r\n                </Card>\r\n              </UILoader>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      )\r\n    ) : (\r\n      <div className=\"app-user-view\">\r\n        <Col xl=\"12\" lg=\"12\" xs={{ order: 1 }} md={{ order: 0, size: 5 }}>\r\n          <Card>\r\n            <CardHeader>\r\n              <Skeleton\r\n                sx={{ bgcolor: colors.dark.light }}\r\n                animation=\"wave\"\r\n                className=\"\"\r\n                width={420}\r\n                height={40}\r\n              />\r\n            </CardHeader>\r\n            <CardBody>\r\n              <DynamicFormLoading\r\n                dynamicForm={pageAttr?.crudOpt?.data?.dynamicForm}\r\n                storeName={storeName}\r\n              />\r\n            </CardBody>\r\n          </Card>\r\n        </Col>\r\n      </div>\r\n    )\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nexport default DetailPage\r\n"],"sourceRoot":""}